

<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8">
    <style>#ul_top_hypers li {
    display: inline;
}</style>

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Tnki | Krou≈æek programov√°n√≠</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Tnki" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="TNKI" />
<meta property="og:description" content="TNKI" />
<link rel="canonical" href="http://localhost:4000/TNKI.html" />
<meta property="og:url" content="http://localhost:4000/TNKI.html" />
<meta property="og:site_name" content="Krou≈æek programov√°n√≠" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-05-14T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tnki" />
<script type="application/ld+json">
{"url":"http://localhost:4000/TNKI.html","dateModified":"2024-05-14T00:00:00+02:00","datePublished":"2024-05-14T00:00:00+02:00","description":"TNKI","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/TNKI.html"},"headline":"Tnki","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=62f491301ed82ff8002850734b9b1c697f096686">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->
<!-- 
 -->

<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">Tnki</h1>
      <h2 class="project-tagline">Str√°nky krou≈æku programov√°n√≠ na V≈†B-Technick√° univerzita Ostrava</h2>

      <a href="http://localhost:4000" class="btn">Dom≈Ø</a>
              <a class="btn" href="/Projects.html">
                Zad√°n√≠
              </a>
              <a class="btn" href="/History.html">
                Archiv
              </a><!-- 
        <a href="https://github.com/kpostrava/kpostrava.github.io" class="btn">View on GitHub</a>
       -->
    </header>

    <main>

      <div class="container">
      <nav class="side-nav">
                <a href="/LoremIpsum_1600.html">
                  Lorem Ipsum, ƒçt 16:00
                </a>
                <a href="/java-Th.html">
                  Java
                </a>
                <a href="/Beginners_1600.html">
                  Zaƒç√°teƒçn√≠ci, ƒçt 16:00
                </a>
                <a href="/Beginners_1500.html">
                  Zaƒç√°teƒçn√≠ci, p√° 15:00
                </a>
                <a href="/Beginners_1430.html">
                  Zaƒç√°teƒçn√≠ci, ƒçt 14:30
                </a>
                <a href="/Advanced_1600.html">
                  Pokroƒçil√≠, ƒçt 16:00
                </a>
                <a href="/Advanced_1430.html">
                  Pokroƒçil√≠, ƒçt 14:30
                </a></nav>

      <div id="content" class="main-content" role="main" style="width: 100%;">
      <h1 id="tnki">TNKI</h1>

<p><img src="images/logo.png" alt="Logo" /></p>

<p><img src="images/screen.png" alt="Screenshot" /></p>

<p>TNKI je real-time multiplayerov√° hra zalo≈æen√° na websocketech. Av≈°ak, proto≈æe z√°bava je v programov√°n√≠, a ne ve hran√≠ hry, dostanete pouze repozit√°≈ô se z√°kladn√≠ funkcionalitou a bude na v√°s hru dokonƒçit. Hra ka≈æd√©ho z v√°s m≈Ø≈æe b√Ωt unik√°tn√≠ a obsahovat r≈Øzn√© hern√≠ mechaniky.</p>

<p>Repozit√°≈ô: <a href="https://github.com/kpostrava/tnki">https://github.com/kpostrava/tnki</a></p>

<p>üí° Pro snadnƒõj≈°√≠ oriantaci v k√≥du si do vscode nainstaluje roz≈°√≠≈ôen√≠ ‚Äúbetter comments‚Äù: <a href="https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments">https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments</a></p>

<h2 id="popis-k√≥du">Popis k√≥du</h2>

<p><strong>Datov√° struktura asociativn√≠ pole (hashmap)</strong></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">map_id_room</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
</code></pre></div></div>

<aside>
üí° Map() = asociativn√≠ pole

</aside>

<p>V asociativn√≠m poli <em>map_id_room</em> pou≈æ√≠v√°me id tanku jako kl√≠ƒç a n√°zev m√≠stnosti jako hodnotu. P≈ôi ka≈æd√©m p≈ôipojen√≠ tanku do roomky z√°rove≈à do tohoto asociativn√≠ho pole p≈ôid√°me nov√Ω z√°znam.</p>

<p>T√≠mto m√°me zaji≈°tƒõno, ≈æe kdykoliv v programu m≈Ø≈æeme okam≈æitƒõ zjistit v jak√© m√≠stosti se tank nach√°z√≠. Naopak p≈ôi odpojen√≠ tanku je d≈Øle≈æit√©, abyste tank z tohoto pole smazali!</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">map_id_room</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">([</span><span class="dl">"</span><span class="s2">id1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">m√≠stnost1</span><span class="dl">"</span><span class="p">],</span> <span class="p">[</span><span class="dl">"</span><span class="s2">id2</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">m√≠stnost2</span><span class="dl">"</span><span class="p">]);</span>

<span class="nx">map_id_room</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">id3</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">m√≠stnost3</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//p≈ôid√°n√≠ z√°znamu s kl√≠ƒçem "id3"</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">map_id_room</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">id2</span><span class="dl">"</span><span class="p">));</span> <span class="c1">//naƒçten√≠ z√°znamu podle kl√≠ƒçe - vyp√≠≈°e "m√≠stnost2"</span>

<span class="nx">map_id_room</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">"</span><span class="s2">id1</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//smaz√°n√≠ z√°znamu s kl√≠ƒçem "id1"</span>
</code></pre></div></div>

<p>P≈ô√≠klad zaps√°n√≠ a z√≠sk√°n√≠ dat z asociativn√≠ho pole.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">map_key_value</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">([</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowUp</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}],</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowLeft</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}],</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowDown</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}],</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowRight</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}],</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>Dal≈°√≠m p≈ô√≠kladem asociativn√≠ho pole je <em>map_key_value. Umo≈æ≈àuje n√°m naj√≠t podle n√°zvu kl√°vesy koeficienty pro pohyb po jednotliv√Ωch os√°ch.</em></p>

<p><strong>Server:</strong></p>

<p>T≈ô√≠dy:</p>

<p><em>Room</em> - Jeden server m≈Ø≈æe hostovat v√≠ce her souƒç√°snƒõ, ka≈æd√° hra m√° svou instanci t≈ô√≠dy <em>Room.</em></p>

<p>Ka≈æd√° instance m√° sv≈Øj unik√°tn√≠ identifik√°tor - <em>room_name,</em> kter√Ω se n√°slednƒõ pou≈æ√≠v√° v asociativn√≠ch pol√≠ch pro jej√≠ identifikaci.</p>

<p>Konstruktor pot≈ôebuje <em>session_id</em> tanku, kter√Ω m√≠stost vytvo≈ôil. <em>Tank kter√Ω m√≠stnost vytvo≈ôil, maxim√°ln√≠ poƒçet hr√°ƒç≈Ø, n√°zev m√≠stnosti a hern√≠ mapu.</em></p>

<p>T≈ô√≠da Room tak√© obsahuje vlastn√≠ asociativn√≠ pole ‚Äútanks‚Äù. Toto pole slou≈æ√≠ k rychl√©mu p≈ôi≈ôazen√≠ session_id ke konkr√©tn√≠ instance t≈ô√≠dy Tank.</p>

<p>Maxim√°ln√≠ poƒçet hr√°ƒç≈Ø a jm√©no m√≠stnosti zad√°v√° u≈æivatel do formul√°≈ôe na domovsk√© str√°nce. Session_id poch√°zi ze socketio. <em>tank</em> je instance t≈ô√≠dy <em>Tank</em>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Room</span> <span class="p">{</span>
  <span class="nx">started</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nx">tanks</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">,</span> <span class="nx">max_players</span><span class="p">,</span> <span class="nx">room_name</span><span class="p">,</span> <span class="nx">game_map</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">admin</span> <span class="o">=</span> <span class="nx">session_id</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">max_players</span> <span class="o">=</span> <span class="nx">max_players</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">room_name</span> <span class="o">=</span> <span class="nx">room_name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">game_map</span> <span class="o">=</span> <span class="nx">game_map</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">tanks</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">);</span>
    <span class="nx">map_id_room</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">room_name</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">join</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tanks</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">);</span>
    <span class="nx">map_id_room</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">room_name</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">tanks_length</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tanks</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><em>Tank</em> - Ka≈æd√Ω hr√°ƒç m√° svou instanci. V≈°echny tanky mus√≠ pat≈ôit nƒõjak√© instanci t≈ô√≠dy Room.</p>

<p>Konstruktor pot≈ôebuje:</p>

<p><em>index</em> tanku - z√≠sk√°me vol√°n√≠m tanks_length() na instanci <em>Room</em>, do kter√© dan√Ω tank pat≈ô√≠.</p>

<p>player_name - zad√°v√° u≈æivatel do formul√°≈ôe na domovsk√© str√°nce</p>

<p>session_id - poch√°z√≠ ze socketio</p>

<p>Nav√≠c ka≈æd√° instance t≈ô√≠dy tank obsahuje informace o aktu√°ln√≠ poloze tanku a jeho barvu.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Tank</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">player_name</span><span class="p">,</span> <span class="nx">session_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">start_positions</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">start_positions</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">y</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">colors</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">player_name</span> <span class="o">=</span> <span class="nx">player_name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">index</span> <span class="o">=</span> <span class="nx">index</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">session_id</span> <span class="o">=</span> <span class="nx">session_id</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">validate_move</span><span class="p">(</span><span class="nx">coords</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">move</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">shift</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">shoot</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>websockety</strong></p>

<p>Ve≈°ker√° komunikace klient/server je zprost≈ôedokov√°na pomoc√≠ websocket.</p>

<p>Nap≈ô√≠klad p≈ôi kliknut√≠ na talƒçitko create room na domovsk√© str√°nce. Se emitne event.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">create_room</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">room_name</span><span class="p">:</span> <span class="nx">room_name</span><span class="p">,</span>
  <span class="na">max_players</span><span class="p">:</span> <span class="nx">max_players</span><span class="p">,</span>
  <span class="na">player_name</span><span class="p">:</span> <span class="nx">player_name</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Server na nƒõj um√≠ reagovat:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">io</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">connection</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">socket</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">create_room</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">join_room</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="p">})</span>
</code></pre></div></div>

<p>Stejn√Ωm zp≈Øsobem to funguje i opaƒçn√Ωm smƒõrem.</p>

<p><strong>Klient</strong></p>

<p><strong>Zmƒõna obrazovek</strong></p>

<p>Pro snadn√© p≈ôep√≠n√°n√≠ mezi obrazovkami - home, lobby, game, m√°me implementovanou jednoduchou funkci:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">screens</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">home</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lobby</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">game</span><span class="dl">"</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">set_screen</span> <span class="o">=</span> <span class="p">(</span><span class="nx">visible_screen</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">screens</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">hidden_screen</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">hidden_screen</span> <span class="o">!=</span> <span class="nx">visible_screen</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">hidden_screen</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">hidden_screen</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">visible_screen</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Jako argument pos√≠l√°me n√°zev obrazovky.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">set_screen</span><span class="p">(</span><span class="dl">"</span><span class="s2">lobby</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>M≈Ø≈æeme takto jednodu≈°e p≈ôep√≠nat obrazovky. Pokud chcete p≈ôidat vlast√≠ obrazovku staƒç√≠ j√≠ jen p≈ôidat jej√≠ id do pole a p≈ôidat j√≠ do html.</p>

<p><strong>U≈æivatelsk√© vstupy</strong></p>

<p>V z√°kladu aplikace pou≈æ√≠v√° ≈°ipky pro pohyb, shift pro rotaci a mezern√≠k pro st≈ôelbu. Pokud je nƒõkter√° z tƒõchto kl√°ves stisknuta, informujeme o tom server. Z√°rove≈à vol√°me metodu <em>preventDefault(),</em> kter√° zabr√°n√≠ nap≈ô√≠klad nechtƒõn√©mu posunu obrazovky v d≈Øsledku stisknut√≠ ≈°ipky dol≈Ø.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">move_keys</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowUp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ArrowLeft</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ArrowDown</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ArrowRight</span><span class="dl">"</span><span class="p">];</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">onkeydown</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">move_keys</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">code</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">update_move</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">key</span><span class="p">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span> <span class="na">shift</span><span class="p">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">shiftKey</span> <span class="p">});</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">//? L√≠b√≠ se ti st≈ôelba p≈ôi kl√°vese "space"? Pokud ne, m≈Ø≈æe≈° ji libovolnƒõ mƒõnit!</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">Space</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">update_shoot</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p><strong>Indik√°tory</strong></p>

<p>Slou≈æ√≠ k ukazov√°n√≠ hr√°ƒç≈Ø ve h≈ôe, jejich ≈æivot≈Ø a n√°boj≈Ø. P≈ôi zmƒõnƒõ stavu n√°boj≈Ø, ƒçi ≈æivot≈Ø je nutn√° jejich ruƒçn√≠ aktualizace. Pom≈Ø≈æe n√°m k tomu funkce set indicator:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">set_indicator</span> <span class="o">=</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">indicator</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">`#indicator_</span><span class="p">${</span><span class="nx">index</span><span class="p">}</span><span class="s2"> .</span><span class="p">${</span><span class="nx">type</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">indicator</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">indicator</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">`&lt;img src="assets/</span><span class="p">${</span><span class="nx">type</span><span class="p">}</span><span class="s2">.png" class="w-8 h-8" /&gt;`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Aktualizaci pak m≈Ø≈æeme udƒõlat velmi snadno.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">set_indicator</span><span class="p">(</span><span class="nx">tank</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ammo</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">set_indicator</span><span class="p">(</span><span class="nx">tank</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="dl">"</span><span class="s2">health</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<aside>
üí° Index identifik√°toru je shodn√Ω s indexem tanku o kter√©m informuje

</aside>

<h2 id="√∫koly">√ökoly</h2>

<aside>
üí° Ve≈°ker√° logika je ≈ôe≈°ena na stranƒõ serveru. Klient pouze vykresluje z√≠skan√° data z eventu a emituje event p≈ôi u≈æivatelsk√©m vstupu.

</aside>

<p><strong>Server:</strong></p>

<ul>
  <li>Zmƒõnit mapu (* generovat novou / upravenou pro ka≈ædou hru)</li>
  <li>Implementovat kolize -
    <ul>
      <li>S okraji mapy (*dynamicky v z√°vislosti na velikosti mapy)</li>
      <li>S barik√°dami</li>
    </ul>
  </li>
  <li>P≈ôidat t≈ô√≠dƒõ tank pot≈ôebn√© atributy - ≈æivoty, n√°boje, <strong>smƒõr</strong> (*vlastn√≠ atributy pro dal≈°i hern√≠ mechaniky)</li>
  <li>Ovƒõ≈ôen√≠ dostatku n√°boj≈Ø p≈ôi st≈ôelbƒõ</li>
  <li>Trajektorie st≈ôely ve smƒõru tanku</li>
  <li>Detekce z√°sahu tanku st≈ôelou</li>
  <li>Ubr√°n√≠ ≈æivota p≈ôi z√°sahu</li>
  <li>Ubr√°n√≠ n√°boje p≈ôi st≈ôelbƒõ</li>
  <li>Dompl≈àov√°n√≠ munice v≈°ech hr√°ƒç≈Ø v pravideln√Ωch intervalech</li>
  <li>Stisknut√≠m ≈°ipky spoleƒçnƒõ s kl√°vesou <em>shift rotovat tank</em></li>
  <li>Logika odpojov√°n√≠ hr√°ƒç≈Ø</li>
  <li>Ozn√°men√≠ v√Ωhry / prohry</li>
  <li>Validace vstup≈Ø pro ud√°je nutn√© k vytvo≈ôen√≠ / p≈ôipojen√≠ do m√≠stosti</li>
</ul>

<p><strong>Klient</strong></p>

<ul>
  <li>Vlastn√≠ textury</li>
  <li>Mƒõnit texturu / rotaci textury na z√°kladnƒõ atributu smƒõru ‚áí tank se nat√°ƒç√≠ ve smƒõru pohybu</li>
  <li>Textura v√Ωbuchu p≈ôi zasa≈æen√≠ hr√°ƒçe</li>
  <li>Tlaƒç√≠tko pro odpojen√≠ z m√≠stnosti v ƒçekac√≠m lobby</li>
  <li>Reakce na odpojen√≠ hr√°ƒçe ze hry (smrt, probl√©m s p≈ôipojen√≠m) - Skr√Ωt jeho indetifik√°tor a odstranit ze seznamu hr√°ƒç≈Ø</li>
  <li>Naimplementuj event handler, kter√Ω aktualizuje stav n√°boj≈Ø na indetifik√°torech</li>
  <li>Funkce pro reset stavu hry pro jej√≠m skonƒçen√≠</li>
  <li>Ozn√°men√≠ v√Ωhru / prohry nap≈ô√≠klad na eventu <em>win / lost</em></li>
</ul>

<p><strong>Bonusov√©</strong></p>

<ul>
  <li>-</li>
  <li>Zmƒõ≈à ovl√°d√°n√≠ ze ≈°ipek a mezern√≠ku nap≈ô√≠klad na wsad a enter</li>
  <li>Vymysli vlastn√≠ typ n√°boj≈Ø, nap≈ô√≠klad: splash demage, proch√°zen√≠ barik√°dami, odr√°≈æen√≠, v√≠ce smƒõrn√©</li>
  <li>Generuj na mapƒõ n√°hodnƒõ bonusov√© ≈æivoty / n√°boje</li>
  <li>Nastaven√≠ velikosti hrac√≠ho pole adminem p≈ôi vytv√°≈ôen√≠ roomky</li>
  <li><strong>Vymysli nƒõco nov√©ho!</strong></li>
</ul>

    </div>
  </div>

  <footer class="site-footer">
    <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
  </footer>

    </main>
  </body>
</html>
<style>
  .container{
    display: flex;
    flex-direction: row;
    width: 100%;
  }

  #content{
    border-left: 1px solid #eee;
  }

  nav{
    display: flex;
    flex-direction: column;
    padding: 1rem;
  }

  nav a {
    margin-top: 1rem;
  }
</style>