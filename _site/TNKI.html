

<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8">
    <style>#ul_top_hypers li {
    display: inline;
}</style>

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Tnki | KrouÅ¾ek programovÃ¡nÃ­</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Tnki" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="TNKI" />
<meta property="og:description" content="TNKI" />
<link rel="canonical" href="http://localhost:4000/TNKI.html" />
<meta property="og:url" content="http://localhost:4000/TNKI.html" />
<meta property="og:site_name" content="KrouÅ¾ek programovÃ¡nÃ­" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-05-14T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tnki" />
<script type="application/ld+json">
{"url":"http://localhost:4000/TNKI.html","dateModified":"2024-05-14T00:00:00+02:00","datePublished":"2024-05-14T00:00:00+02:00","description":"TNKI","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/TNKI.html"},"headline":"Tnki","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=62f491301ed82ff8002850734b9b1c697f096686">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->
<!-- 
 -->

<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">Tnki</h1>
      <h2 class="project-tagline">StrÃ¡nky krouÅ¾ku programovÃ¡nÃ­ na VÅ B-TechnickÃ¡ univerzita Ostrava</h2>

      <a href="http://localhost:4000" class="btn">DomÅ¯</a>
              <a class="btn" href="/Projects.html">
                ZadÃ¡nÃ­
              </a>
              <a class="btn" href="/History.html">
                Archiv
              </a><!-- 
        <a href="https://github.com/kpostrava/kpostrava.github.io" class="btn">View on GitHub</a>
       -->
    </header>

    <main>

      <div class="container">
      <nav class="side-nav">
                <a href="/LoremIpsum_1600.html">
                  Lorem Ipsum, Ät 16:00
                </a>
                <a href="/java-Th.html">
                  Java
                </a>
                <a href="/Beginners_1600.html">
                  ZaÄÃ¡teÄnÃ­ci, Ät 16:00
                </a>
                <a href="/Beginners_1500.html">
                  ZaÄÃ¡teÄnÃ­ci, pÃ¡ 15:00
                </a>
                <a href="/Beginners_1430.html">
                  ZaÄÃ¡teÄnÃ­ci, Ät 14:30
                </a>
                <a href="/Advanced_1600.html">
                  PokroÄilÃ­, Ät 16:00
                </a>
                <a href="/Advanced_1430.html">
                  PokroÄilÃ­, Ät 14:30
                </a></nav>

      <div id="content" class="main-content" role="main" style="width: 100%;">
      <h1 id="tnki">TNKI</h1>

<p><img src="images/logo.png" alt="Logo" /></p>

<p><img src="images/screen.png" alt="Screenshot" /></p>

<p>TNKI je real-time multiplayerovÃ¡ hra zaloÅ¾enÃ¡ na websocketech. AvÅ¡ak, protoÅ¾e zÃ¡bava je v programovÃ¡nÃ­, a ne ve hranÃ­ hry, dostanete pouze repozitÃ¡Å™ se zÃ¡kladnÃ­ funkcionalitou a bude na vÃ¡s hru dokonÄit. Hra kaÅ¾dÃ©ho z vÃ¡s mÅ¯Å¾e bÃ½t unikÃ¡tnÃ­ a obsahovat rÅ¯znÃ© hernÃ­ mechaniky.</p>

<p>RepozitÃ¡Å™: <a href="https://github.com/kpostrava/tnki">https://github.com/kpostrava/tnki</a></p>

<p>ğŸ’¡ Pro snadnÄ›jÅ¡Ã­ oriantaci v kÃ³du si do vscode nainstaluje rozÅ¡Ã­Å™enÃ­ â€œbetter commentsâ€: <a href="https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments">https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments</a></p>

<h2 id="popis-kÃ³du">Popis kÃ³du</h2>

<p><strong>DatovÃ¡ struktura asociativnÃ­ pole (hashmap)</strong></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">map_id_room</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
</code></pre></div></div>

<aside>
ğŸ’¡ Map() = asociativnÃ­ pole

</aside>

<p>V asociativnÃ­m poli <em>map_id_room</em> pouÅ¾Ã­vÃ¡me id tanku jako klÃ­Ä a nÃ¡zev mÃ­stnosti jako hodnotu. PÅ™i kaÅ¾dÃ©m pÅ™ipojenÃ­ tanku do roomky zÃ¡roveÅˆ do tohoto asociativnÃ­ho pole pÅ™idÃ¡me novÃ½ zÃ¡znam.</p>

<p>TÃ­mto mÃ¡me zajiÅ¡tÄ›no, Å¾e kdykoliv v programu mÅ¯Å¾eme okamÅ¾itÄ› zjistit v jakÃ© mÃ­stosti se tank nachÃ¡zÃ­. Naopak pÅ™i odpojenÃ­ tanku je dÅ¯leÅ¾itÃ©, abyste tank z tohoto pole smazali!</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">map_id_room</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">([</span><span class="dl">"</span><span class="s2">id1</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mÃ­stnost1</span><span class="dl">"</span><span class="p">],</span> <span class="p">[</span><span class="dl">"</span><span class="s2">id2</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mÃ­stnost2</span><span class="dl">"</span><span class="p">]);</span>

<span class="nx">map_id_room</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">id3</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">mÃ­stnost3</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//pÅ™idÃ¡nÃ­ zÃ¡znamu s klÃ­Äem "id3"</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">map_id_room</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">id2</span><span class="dl">"</span><span class="p">));</span> <span class="c1">//naÄtenÃ­ zÃ¡znamu podle klÃ­Äe - vypÃ­Å¡e "mÃ­stnost2"</span>

<span class="nx">map_id_room</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">"</span><span class="s2">id1</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//smazÃ¡nÃ­ zÃ¡znamu s klÃ­Äem "id1"</span>
</code></pre></div></div>

<p>PÅ™Ã­klad zapsÃ¡nÃ­ a zÃ­skÃ¡nÃ­ dat z asociativnÃ­ho pole.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">map_key_value</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">([</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowUp</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}],</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowLeft</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}],</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowDown</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}],</span>
  <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowRight</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}],</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>DalÅ¡Ã­m pÅ™Ã­kladem asociativnÃ­ho pole je <em>map_key_value. UmoÅ¾Åˆuje nÃ¡m najÃ­t podle nÃ¡zvu klÃ¡vesy koeficienty pro pohyb po jednotlivÃ½ch osÃ¡ch.</em></p>

<p><strong>Server:</strong></p>

<p>TÅ™Ã­dy:</p>

<p><em>Room</em> - Jeden server mÅ¯Å¾e hostovat vÃ­ce her souÄÃ¡snÄ›, kaÅ¾dÃ¡ hra mÃ¡ svou instanci tÅ™Ã­dy <em>Room.</em></p>

<p>KaÅ¾dÃ¡ instance mÃ¡ svÅ¯j unikÃ¡tnÃ­ identifikÃ¡tor - <em>room_name,</em> kterÃ½ se nÃ¡slednÄ› pouÅ¾Ã­vÃ¡ v asociativnÃ­ch polÃ­ch pro jejÃ­ identifikaci.</p>

<p>Konstruktor potÅ™ebuje <em>session_id</em> tanku, kterÃ½ mÃ­stost vytvoÅ™il. <em>Tank kterÃ½ mÃ­stnost vytvoÅ™il, maximÃ¡lnÃ­ poÄet hrÃ¡ÄÅ¯, nÃ¡zev mÃ­stnosti a hernÃ­ mapu.</em></p>

<p>TÅ™Ã­da Room takÃ© obsahuje vlastnÃ­ asociativnÃ­ pole â€œtanksâ€. Toto pole slouÅ¾Ã­ k rychlÃ©mu pÅ™iÅ™azenÃ­ session_id ke konkrÃ©tnÃ­ instance tÅ™Ã­dy Tank.</p>

<p>MaximÃ¡lnÃ­ poÄet hrÃ¡ÄÅ¯ a jmÃ©no mÃ­stnosti zadÃ¡vÃ¡ uÅ¾ivatel do formulÃ¡Å™e na domovskÃ© strÃ¡nce. Session_id pochÃ¡zi ze socketio. <em>tank</em> je instance tÅ™Ã­dy <em>Tank</em>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Room</span> <span class="p">{</span>
  <span class="nx">started</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="nx">tanks</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">,</span> <span class="nx">max_players</span><span class="p">,</span> <span class="nx">room_name</span><span class="p">,</span> <span class="nx">game_map</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">admin</span> <span class="o">=</span> <span class="nx">session_id</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">max_players</span> <span class="o">=</span> <span class="nx">max_players</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">room_name</span> <span class="o">=</span> <span class="nx">room_name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">game_map</span> <span class="o">=</span> <span class="nx">game_map</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">tanks</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">);</span>
    <span class="nx">map_id_room</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">room_name</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">join</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">tanks</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">tank</span><span class="p">);</span>
    <span class="nx">map_id_room</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">session_id</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">room_name</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">tanks_length</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tanks</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><em>Tank</em> - KaÅ¾dÃ½ hrÃ¡Ä mÃ¡ svou instanci. VÅ¡echny tanky musÃ­ patÅ™it nÄ›jakÃ© instanci tÅ™Ã­dy Room.</p>

<p>Konstruktor potÅ™ebuje:</p>

<p><em>index</em> tanku - zÃ­skÃ¡me volÃ¡nÃ­m tanks_length() na instanci <em>Room</em>, do kterÃ© danÃ½ tank patÅ™Ã­.</p>

<p>player_name - zadÃ¡vÃ¡ uÅ¾ivatel do formulÃ¡Å™e na domovskÃ© strÃ¡nce</p>

<p>session_id - pochÃ¡zÃ­ ze socketio</p>

<p>NavÃ­c kaÅ¾dÃ¡ instance tÅ™Ã­dy tank obsahuje informace o aktuÃ¡lnÃ­ poloze tanku a jeho barvu.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Tank</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">player_name</span><span class="p">,</span> <span class="nx">session_id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">start_positions</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">start_positions</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">y</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">colors</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">player_name</span> <span class="o">=</span> <span class="nx">player_name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">index</span> <span class="o">=</span> <span class="nx">index</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">session_id</span> <span class="o">=</span> <span class="nx">session_id</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">validate_move</span><span class="p">(</span><span class="nx">coords</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">move</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">shift</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">shoot</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>websockety</strong></p>

<p>VeÅ¡kerÃ¡ komunikace klient/server je zprostÅ™edokovÃ¡na pomocÃ­ websocket.</p>

<p>NapÅ™Ã­klad pÅ™i kliknutÃ­ na talÄitko create room na domovskÃ© strÃ¡nce. Se emitne event.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">create_room</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">room_name</span><span class="p">:</span> <span class="nx">room_name</span><span class="p">,</span>
  <span class="na">max_players</span><span class="p">:</span> <span class="nx">max_players</span><span class="p">,</span>
  <span class="na">player_name</span><span class="p">:</span> <span class="nx">player_name</span><span class="p">,</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Server na nÄ›j umÃ­ reagovat:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">io</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">connection</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">socket</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">create_room</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
	    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">join_room</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="p">})</span>
</code></pre></div></div>

<p>StejnÃ½m zpÅ¯sobem to funguje i opaÄnÃ½m smÄ›rem.</p>

<p><strong>Klient</strong></p>

<p><strong>ZmÄ›na obrazovek</strong></p>

<p>Pro snadnÃ© pÅ™epÃ­nÃ¡nÃ­ mezi obrazovkami - home, lobby, game, mÃ¡me implementovanou jednoduchou funkci:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">screens</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">home</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">lobby</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">game</span><span class="dl">"</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">set_screen</span> <span class="o">=</span> <span class="p">(</span><span class="nx">visible_screen</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">screens</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">hidden_screen</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">hidden_screen</span> <span class="o">!=</span> <span class="nx">visible_screen</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">hidden_screen</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">hidden_screen</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">visible_screen</span><span class="p">).</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Jako argument posÃ­lÃ¡me nÃ¡zev obrazovky.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">set_screen</span><span class="p">(</span><span class="dl">"</span><span class="s2">lobby</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<p>MÅ¯Å¾eme takto jednoduÅ¡e pÅ™epÃ­nat obrazovky. Pokud chcete pÅ™idat vlastÃ­ obrazovku staÄÃ­ jÃ­ jen pÅ™idat jejÃ­ id do pole a pÅ™idat jÃ­ do html.</p>

<p><strong>UÅ¾ivatelskÃ© vstupy</strong></p>

<p>V zÃ¡kladu aplikace pouÅ¾Ã­vÃ¡ Å¡ipky pro pohyb, shift pro rotaci a mezernÃ­k pro stÅ™elbu. Pokud je nÄ›kterÃ¡ z tÄ›chto klÃ¡ves stisknuta, informujeme o tom server. ZÃ¡roveÅˆ volÃ¡me metodu <em>preventDefault(),</em> kterÃ¡ zabrÃ¡nÃ­ napÅ™Ã­klad nechtÄ›nÃ©mu posunu obrazovky v dÅ¯sledku stisknutÃ­ Å¡ipky dolÅ¯.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">move_keys</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">ArrowUp</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ArrowLeft</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ArrowDown</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ArrowRight</span><span class="dl">"</span><span class="p">];</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">onkeydown</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">move_keys</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">code</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">update_move</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">key</span><span class="p">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span> <span class="na">shift</span><span class="p">:</span> <span class="nx">e</span><span class="p">.</span><span class="nx">shiftKey</span> <span class="p">});</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">//? LÃ­bÃ­ se ti stÅ™elba pÅ™i klÃ¡vese "space"? Pokud ne, mÅ¯Å¾eÅ¡ ji libovolnÄ› mÄ›nit!</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">Space</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">"</span><span class="s2">update_shoot</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p><strong>IndikÃ¡tory</strong></p>

<p>SlouÅ¾Ã­ k ukazovÃ¡nÃ­ hrÃ¡ÄÅ¯ ve hÅ™e, jejich Å¾ivotÅ¯ a nÃ¡bojÅ¯. PÅ™i zmÄ›nÄ› stavu nÃ¡bojÅ¯, Äi Å¾ivotÅ¯ je nutnÃ¡ jejich ruÄnÃ­ aktualizace. PomÅ¯Å¾e nÃ¡m k tomu funkce set indicator:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">set_indicator</span> <span class="o">=</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">indicator</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">`#indicator_</span><span class="p">${</span><span class="nx">index</span><span class="p">}</span><span class="s2"> .</span><span class="p">${</span><span class="nx">type</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">indicator</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">value</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">indicator</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">`&lt;img src="assets/</span><span class="p">${</span><span class="nx">type</span><span class="p">}</span><span class="s2">.png" class="w-8 h-8" /&gt;`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Aktualizaci pak mÅ¯Å¾eme udÄ›lat velmi snadno.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">set_indicator</span><span class="p">(</span><span class="nx">tank</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ammo</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">set_indicator</span><span class="p">(</span><span class="nx">tank</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="dl">"</span><span class="s2">health</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<aside>
ğŸ’¡ Index identifikÃ¡toru je shodnÃ½ s indexem tanku o kterÃ©m informuje

</aside>

<h2 id="Ãºkoly">Ãškoly</h2>

<aside>
ğŸ’¡ VeÅ¡kerÃ¡ logika je Å™eÅ¡ena na stranÄ› serveru. Klient pouze vykresluje zÃ­skanÃ¡ data z eventu a emituje event pÅ™i uÅ¾ivatelskÃ©m vstupu.

</aside>

<p><strong>Server:</strong></p>

<ul>
  <li>ZmÄ›nit mapu (* generovat novou / upravenou pro kaÅ¾dou hru)</li>
  <li>Implementovat kolize -
    <ul>
      <li>S okraji mapy (*dynamicky v zÃ¡vislosti na velikosti mapy)</li>
      <li>S barikÃ¡dami</li>
    </ul>
  </li>
  <li>PÅ™idat tÅ™Ã­dÄ› tank potÅ™ebnÃ© atributy - Å¾ivoty, nÃ¡boje, <strong>smÄ›r</strong> (*vlastnÃ­ atributy pro dalÅ¡i hernÃ­ mechaniky)</li>
  <li>OvÄ›Å™enÃ­ dostatku nÃ¡bojÅ¯ pÅ™i stÅ™elbÄ›</li>
  <li>Trajektorie stÅ™ely ve smÄ›ru tanku</li>
  <li>Detekce zÃ¡sahu tanku stÅ™elou</li>
  <li>UbrÃ¡nÃ­ Å¾ivota pÅ™i zÃ¡sahu</li>
  <li>UbrÃ¡nÃ­ nÃ¡boje pÅ™i stÅ™elbÄ›</li>
  <li>DomplÅˆovÃ¡nÃ­ munice vÅ¡ech hrÃ¡ÄÅ¯ v pravidelnÃ½ch intervalech</li>
  <li>StisknutÃ­m Å¡ipky spoleÄnÄ› s klÃ¡vesou <em>shift rotovat tank</em></li>
  <li>Logika odpojovÃ¡nÃ­ hrÃ¡ÄÅ¯</li>
  <li>OznÃ¡menÃ­ vÃ½hry / prohry</li>
  <li>Validace vstupÅ¯ pro udÃ¡je nutnÃ© k vytvoÅ™enÃ­ / pÅ™ipojenÃ­ do mÃ­stosti</li>
</ul>

<p><strong>Klient</strong></p>

<ul>
  <li>VlastnÃ­ textury</li>
  <li>MÄ›nit texturu / rotaci textury na zÃ¡kladnÄ› atributu smÄ›ru â‡’ tank se natÃ¡ÄÃ­ ve smÄ›ru pohybu</li>
  <li>Textura vÃ½buchu pÅ™i zasaÅ¾enÃ­ hrÃ¡Äe</li>
  <li>TlaÄÃ­tko pro odpojenÃ­ z mÃ­stnosti v ÄekacÃ­m lobby</li>
  <li>Reakce na odpojenÃ­ hrÃ¡Äe ze hry (smrt, problÃ©m s pÅ™ipojenÃ­m) - SkrÃ½t jeho indetifikÃ¡tor a odstranit ze seznamu hrÃ¡ÄÅ¯</li>
  <li>Naimplementuj event handler, kterÃ½ aktualizuje stav nÃ¡bojÅ¯ na indetifikÃ¡torech</li>
  <li>Funkce pro reset stavu hry pro jejÃ­m skonÄenÃ­</li>
  <li>OznÃ¡menÃ­ vÃ½hru / prohry napÅ™Ã­klad na eventu <em>win / lost</em></li>
</ul>

<p><strong>BonusovÃ©</strong></p>

<ul>
  <li>-</li>
  <li>ZmÄ›Åˆ ovlÃ¡dÃ¡nÃ­ ze Å¡ipek a mezernÃ­ku napÅ™Ã­klad na wsad a enter</li>
  <li>Vymysli vlastnÃ­ typ nÃ¡bojÅ¯, napÅ™Ã­klad: splash demage, prochÃ¡zenÃ­ barikÃ¡dami, odrÃ¡Å¾enÃ­, vÃ­ce smÄ›rnÃ©</li>
  <li>Generuj na mapÄ› nÃ¡hodnÄ› bonusovÃ© Å¾ivoty / nÃ¡boje</li>
  <li>NastavenÃ­ velikosti hracÃ­ho pole adminem pÅ™i vytvÃ¡Å™enÃ­ roomky</li>
  <li><strong>Vymysli nÄ›co novÃ©ho!</strong></li>
</ul>

    </div>
  </div>

  <footer class="site-footer">
    <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
  </footer>

    </main>
  </body>
</html>
<style>
  .container{
    display: flex;
    flex-direction: row;
    width: 100%;
  }

  #content{
    border-left: 1px solid #eee;
  }

  nav{
    display: flex;
    flex-direction: column;
    padding: 1rem;
  }

  nav a {
    margin-top: 1rem;
  }
</style>